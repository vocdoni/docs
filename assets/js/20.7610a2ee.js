(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{388:function(t,e,s){"use strict";s.r(e);var a=s(24),n=Object(a.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"process-data-schemes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#process-data-schemes"}},[t._v("#")]),t._v(" Process Data Schemes")]),t._v(" "),s("p",[t._v("As stated before, governance processes span across the "),s("a",{attrs:{href:"/architecture/smart-contracts/process"}},[t._v("Process Smart Contract")]),t._v(", the "),s("a",{attrs:{href:"/architecture/services/vochain"}},[t._v("Vochain")]),t._v(" and distributed file storage, providing the human readable metadata.")]),t._v(" "),s("p",[t._v("Along the different stages of a governance process, the following data schemes are used:")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#process-metadata"}},[t._v("Process metadata")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#vote-envelope"}},[t._v("Vote Envelope")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#vote-package"}},[t._v("Vote Package")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#results"}},[t._v("Results")])])]),t._v(" "),s("h2",{attrs:{id:"process-metadata"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#process-metadata"}},[t._v("#")]),t._v(" Process Metadata")]),t._v(" "),s("p",[t._v("The creation of this data structure is critical. Multiple checks should be in place to ensure that the data is coherent (well formatted, all relevant locales present, etc).")]),t._v(" "),s("p",[t._v("The Process Metadata defines the human readable information and should not be confused with the "),s("RouterLink",{attrs:{to:"/architecture/smart-contracts/process.html#contract-structs"}},[t._v("Process Parameters")]),t._v(" in the Smart Contract, which define how the process should behave.")],1),t._v(" "),s("p",[t._v("The metadata of a process is represented as follows:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Protocol version")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Universal Basic Income"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ca"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Renda Bàsica Universal"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The description goes here"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ca"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"La descripció va aquí"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"media"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"header"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"<content uri>"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"streamUri"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://.../"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"questions"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Should universal basic income become a human right?"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ca"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Estàs d\'acord amb que la renda bàsica universal sigui un dret humà?"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"description"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"The description goes here"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ca"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"La descripció va aquí"')]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"choices"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Yes"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ca"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sí"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"en"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"No"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"ca"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"No"')]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"value"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"results"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"aggregation"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"index-weighted"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "index-weighted" | "discrete-counting",')]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"display"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rating"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// "rating" | "simple-question" | "multiple-choice" | "linear-weighted" | "quadratic-voting" | "multiple-question" | "raw"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("The "),s("code",[t._v("results")]),t._v(" fields are informational only. Regardless of the chosen "),s("code",[t._v("aggregation")]),t._v(" or "),s("code",[t._v("display")]),t._v(", the scrutiny is the same for all cases. However, these fields help the UI components to interpret and display the results according to the "),s("a",{attrs:{href:"/architecture/data-schemes/ballot-protocol"}},[t._v("ballot protocol")])]),t._v(" "),s("h2",{attrs:{id:"vote-envelope"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vote-envelope"}},[t._v("#")]),t._v(" Vote Envelope")]),t._v(" "),s("p",[t._v("The Vote Envelope contains a (possibly encrypted) Vote Package and provides details to prove that the incoming vote is valid. Some fields may be optional depending on the process "),s("code",[t._v("mode")]),t._v(" and "),s("code",[t._v("envelopeType")]),t._v(".")]),t._v(" "),s("h5",{attrs:{id:"when-envelopetype-anonymous-is-enabled"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#when-envelopetype-anonymous-is-enabled"}},[t._v("#")]),t._v(" When "),s("code",[t._v("envelopeType.ANONYMOUS")]),t._v(" is enabled")]),t._v(" "),s("p",[t._v("This section will be available soon.")]),t._v(" "),s("h5",{attrs:{id:"when-envelopetype-anonymous-is-disabled"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#when-envelopetype-anonymous-is-disabled"}},[t._v("#")]),t._v(" When "),s("code",[t._v("envelopeType.ANONYMOUS")]),t._v(" is disabled")]),t._v(" "),s("p",[t._v("A signed (non-anonymous) Vote Envelope features the process ID, the Census Merkle Proof of the user, a nonce to prevent replay attacks, the index of the encryption keys used, a Base64 representation of the Vote Package and the user's signature.")]),t._v(" "),s("p",[t._v("In order to guarantee 100% reproduceability of the signature, the Vote Envelope is encoded as a Protobuf model and serialized into a byte array. This byte array is then signed and both fields are sent via a "),s("code",[t._v("SignedTx")]),t._v(" model to a Gateway.")]),t._v(" "),s("div",{staticClass:"language-proto extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("// Protobuf models\n\nmessage VoteEnvelope {\n        bytes nonce = 1;  // Unique number per vote attempt, so that replay attacks can't reuse this payload\n        bytes processId = 2;  // The process for which the vote is cast\n        Proof proof = 3;  // One of ProofGraviton, ProofIden3, ProofEthereumStorage, ProofEthereumAccount, or ProofCA\n        bytes votePackage = 4;   // JSON string of the Vote Package, encoded as bytes. It may be encrypted.\n        bytes nullifier = 5;  // Hash of the private key + processId (optional, depending on the type)\n\n        repeated uint32 encryptionKeyIndexes = 6; // On encrypted votes, contains the (sorted) indexes of the keys used to encrypt\n}\n\n// ...\n\nmessage Tx {\n\toneof payload {\n\t\tVoteEnvelope vote = 1;\n\t\t// ...\n\t}\n}\n\nmessage SignedTx {\n\tbytes tx = 1; // The bytes produced by Marshaling a Tx{} message\n\toptional bytes signature = 2; // The signature for the tx bytes. \n\t// signature is only required in those transactions that actually need a signature.\n        // I.e zk-SNARKs based transactions won't needed, however the transaction should use\n        // this message type in order to preserve consistency on the Vochain\n}\n\n")])])]),s("h2",{attrs:{id:"vote-package"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vote-package"}},[t._v("#")]),t._v(" Vote Package")]),t._v(" "),s("p",[t._v("Contains the actual votes and is part of the Vote Envelope.")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"nonce"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"01234567890abcdef"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 8+ byte random string to prevent guessing the encrypted payload before the reveal key is released")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"votes"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Directly mapped to the `questions` field of the metadata")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h5",{attrs:{id:"when-envelopetype-encrypted-vote-is-disabled"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#when-envelopetype-encrypted-vote-is-disabled"}},[t._v("#")]),t._v(" When "),s("code",[t._v("envelopeType.ENCRYPTED_VOTE")]),t._v(" is disabled")]),t._v(" "),s("ul",[s("li",[t._v("The "),s("code",[t._v("nonce")]),t._v(" can be omitted.")]),t._v(" "),s("li",[t._v("The package has to be serialized as a JSON string and encoded as bytes.")])]),t._v(" "),s("h5",{attrs:{id:"when-envelopetype-encrypted-vote-is-enabled"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#when-envelopetype-encrypted-vote-is-enabled"}},[t._v("#")]),t._v(" When "),s("code",[t._v("envelopeType.ENCRYPTED_VOTE")]),t._v(" is enabled")]),t._v(" "),s("ul",[s("li",[t._v("The "),s("code",[t._v("nonce")]),t._v(" is mandatory.")]),t._v(" "),s("li",[t._v("The package has to be serialized as a JSON string encoded as bytes.")]),t._v(" "),s("li",[t._v("It must be encrypted with a subset of the public keys or all of them.")]),t._v(" "),s("li",[t._v("The index of the public keys used to encrypt must be included in the Vote Envelope in the exact order they have been used.")])]),t._v(" "),s("h2",{attrs:{id:"results"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#results"}},[t._v("#")]),t._v(" Results")]),t._v(" "),s("p",[t._v("Requests to the Results API will return an Array of number arrays, following the "),s("a",{attrs:{href:"/architecture/data-schemes/ballot-protocol"}},[t._v("Ballot Protocol")]),t._v(". They will contain a bi-dimensional array of integers, aggregating the values currently stored on the Vochain.")]),t._v(" "),s("p",[t._v("The interpretation of these values is left to the Client apps, and is determined by the "),s("code",[t._v("results.aggregation")]),t._v(" and "),s("code",[t._v("results.display")]),t._v(" fields of the Process Metadata, listed above.")])])}),[],!1,null,null,null);e.default=n.exports}}]);
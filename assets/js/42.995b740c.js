(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{407:function(e,n,a){"use strict";a.r(n);var t=a(24),s=Object(t.a)({},(function(){var e=this,n=e.$createElement,a=e._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"custom-vochain-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-vochain-deployment"}},[e._v("#")]),e._v(" Custom Vochain Deployment")]),e._v(" "),a("p",[e._v("In this document we will guide through the steps of deploying a full Vochain (Vocdoni's blockchain) stack using a custom architecture. It is meant to give the reader a general idea on how Vocdoni components work, and it is not meant to be production ready chain.")]),e._v(" "),a("p",[e._v("The Vocdoni's mainnet chain genesis is 'hardcoded' into the project's code itself, but it is also possible to generate any other tendermint based chain at will for testing, forking or any other purposes.")]),e._v(" "),a("p",[e._v("For this example, we are going to show a simple environment consisting of 3 miners, two gateways and one oracle.")]),e._v(" "),a("p",[e._v("Please refer to the "),a("a",{attrs:{href:"https://docs.vocdoni.io/#/architecture/general",target:"_blank",rel:"noopener noreferrer"}},[e._v("documentation"),a("OutboundLink")],1),e._v(" to learn more about each type of node role.")]),e._v(" "),a("h3",{attrs:{id:"requirements"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" Requirements")]),e._v(" "),a("h3",{attrs:{id:"genesis-and-keys-generation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#genesis-and-keys-generation"}},[e._v("#")]),e._v(" Genesis and keys generation")]),e._v(" "),a("p",[e._v("First, we are going to generate all the cryptographic keys that our nodes will use to identify themselves, sign transactions, etc. The project "),a("code",[e._v("go-dvote")]),e._v(" includes a command line tool to help us with that, so we can do it in only one command.")]),e._v(" "),a("p",[e._v("Let's build "),a("code",[e._v("dvotecli")]),e._v(" tool. Clone the project:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git clone https://github.com/vocdoni/go-dvote\ncd go-dvote\n")])])]),a("p",[e._v("Then, build the command line tool:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("go build ./cmd/dvotecli\n")])])]),a("p",[e._v("Now we are ready to generate the keys and the genesis.\nThis tool will provide us keys for miners and oracles, the gateways will follow later on.")]),e._v(" "),a("p",[e._v("We need to choose a chain identification name for it, we will call it "),a("code",[e._v("examplechain")])]),e._v(" "),a("p",[e._v("We are going to deploy 3 miners and one oracle only, so the command will be:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("./dvotecli generate --chainId examplechain --miners 3 --oracles 1\n")])])]),a("p",[e._v("The (long) output will be similar to:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('>>> Miner #1\nAddress: DF071D6D2543569845AE7597E36423E748A372CA\nPrivate Key: 763db55b88a010e3add4d801320107d58909efdcb82e1ca4edb02b7535d7a3d5345c5cd42b0b37ac3ad91a98e259a18c1423921545f029f534baac9312ec16ae\n>>> Miner #2\nAddress: 1C8F495E296C38274F71B3BD4D2A40503276BF96\nPrivate Key: 51c7662540ca01338fefa5c8caf6a26020bbaa2a437203d0d12717228eb6632d189d60ff7c66c29dd41d7a141b5b21e841cb8cb9d8d6537b1fe9f6ca6a20b67d\n>>> Miner #3\nAddress: E1467FE6E32824854837A7DB68D6B27D3080034E\nPrivate Key: d5a8d1d975370d83763c4623ffaf0f421ace76225b8ef53406486d945ec64339985080fc53ef5f36cfd882feec67d067f694d658d4683786112f8576a1fb4b18\n\n>>> Oracle #1\nAddress: 0xdb016B645f49b70B881E118da91d502e88b3888A\nPrivate Key: 35326662373437353637633539393332653336356136393935643662626136616530623836353435356162356532343461366466666261613066343437333464\n\n>>> Genesis JSON\n{\n  "genesis_time": "2020-11-03T10:05:40.580623347Z",\n  "chain_id": "examplechain",\n  "consensus_params": {\n    "block": {\n      "max_bytes": "22020096",\n      "max_gas": "-1",\n      "time_iota_ms": "1000"\n    },\n    "evidence": {\n      "max_age_num_blocks": "100000",\n      "max_age_duration": "172800000000000"\n    },\n    "validator": {\n      "pub_key_types": [\n        "ed25519"\n      ]\n    }\n  },\n  "validators": [\n    {\n      "address": "DF071D6D2543569845AE7597E36423E748A372CA",\n      "pub_key": {\n        "type": "tendermint/PubKeyEd25519",\n        "value": "NFxc1CsLN6w62RqY4lmhjBQjkhVF8Cn1NLqskxLsFq4="\n      },\n      "power": "10",\n      "name": "miner-1"\n    },\n    {\n      "address": "1C8F495E296C38274F71B3BD4D2A40503276BF96",\n      "pub_key": {\n        "type": "tendermint/PubKeyEd25519",\n        "value": "GJ1g/3xmwp3UHXoUG1sh6EHLjLnY1lN7H+n2ymogtn0="\n      },\n      "power": "10",\n      "name": "miner-2"\n    },\n    {\n      "address": "E1467FE6E32824854837A7DB68D6B27D3080034E",\n      "pub_key": {\n        "type": "tendermint/PubKeyEd25519",\n        "value": "mFCA/FPvXzbP2IL+7GfQZ/aU1ljUaDeGES+FdqH7Sxg="\n      },\n      "power": "10",\n      "name": "miner-3"\n    }\n  ],\n  "app_hash": "",https://docs.vocdoni.io/#/architecture/general\n  "app_state": {\n    "validators": [\n      {\n        "address": "DF071D6D2543569845AE7597E36423E748A372CA",\n        "pub_key": {\n          "type": "tendermint/PubKeyEd25519",\n          "value": "NFxc1CsLN6w62RqY4lmhjBQjkhVF8Cn1NLqskxLsFq4="\n        },\n        "power": "10",\n        "name": "miner-1"\n      },\n      {\n        "address": "1C8F495E296C38274F71B3BD4D2A40503276BF96",\n        "pub_key": {\n          "type": "tendermint/PubKeyEd25519",\n          "value": "GJ1g/3xmwp3UHXoUG1sh6EHLjLnY1lN7H+n2ymogtn0="\n        },\n        "power": "10",\n        "name": "miner-2"\n      },\n      {\n        "address": "E1467FE6E32824854837A7DB68D6B27D3080034E",\n        "pub_key": {\n          "type": "tendermint/PubKeyEd25519",\n          "value": "mFCA/FPvXzbP2IL+7GfQZ/aU1ljUaDeGES+FdqH7Sxg="\n        },\n        "power": "10",\n        "name": "miner-3"\n      }\n    ],\n    "oracles": [\n      "0xdb016B645f49b70B881E118da91d502e88b3888A"\n    ]\n  }\n}\n')])])]),a("p",[e._v("As you can see, there's a first part with public / private keypairs for the miners and oracles, and a second part with JSON data, which defines the genesis file itself.")]),e._v(" "),a("p",[e._v("Copy and paste all into a file. You can also redirect the output to a file, like this:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("./dvotecli --color=false  generate --chainId examplechain --miners 3 --oracles 1 > example_chain.txt\n")])])]),a("h3",{attrs:{id:"miners-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#miners-deployment"}},[e._v("#")]),e._v(" Miners deployment")]),e._v(" "),a("h3",{attrs:{id:"oracle-deployment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#oracle-deployment"}},[e._v("#")]),e._v(" Oracle deployment")])])}),[],!1,null,null,null);n.default=s.exports}}]);
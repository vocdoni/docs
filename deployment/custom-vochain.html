<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Custom Vochain Deployment | Vocdoni</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A decentralized self sovereign governance platform">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.b4782a24.css" as="style"><link rel="preload" href="/assets/js/app.003a3fab.js" as="script"><link rel="preload" href="/assets/js/2.d75a9e61.js" as="script"><link rel="preload" href="/assets/js/42.995b740c.js" as="script"><link rel="prefetch" href="/assets/js/10.7d736aa9.js"><link rel="prefetch" href="/assets/js/11.24f4b6a1.js"><link rel="prefetch" href="/assets/js/12.fbc7926a.js"><link rel="prefetch" href="/assets/js/13.1d48d867.js"><link rel="prefetch" href="/assets/js/14.f1695afd.js"><link rel="prefetch" href="/assets/js/15.fd5bd6ca.js"><link rel="prefetch" href="/assets/js/16.7848fcf4.js"><link rel="prefetch" href="/assets/js/17.a09d0fce.js"><link rel="prefetch" href="/assets/js/18.2d6d7bd0.js"><link rel="prefetch" href="/assets/js/19.7ca86ba4.js"><link rel="prefetch" href="/assets/js/20.7610a2ee.js"><link rel="prefetch" href="/assets/js/21.a33e4585.js"><link rel="prefetch" href="/assets/js/22.cdbbe0cb.js"><link rel="prefetch" href="/assets/js/23.daf8da8a.js"><link rel="prefetch" href="/assets/js/24.33f4a899.js"><link rel="prefetch" href="/assets/js/25.ca7b1363.js"><link rel="prefetch" href="/assets/js/26.00dda6a7.js"><link rel="prefetch" href="/assets/js/27.9643f5df.js"><link rel="prefetch" href="/assets/js/28.95fc6467.js"><link rel="prefetch" href="/assets/js/29.6d11f8e1.js"><link rel="prefetch" href="/assets/js/3.87bd6438.js"><link rel="prefetch" href="/assets/js/30.5f4b8604.js"><link rel="prefetch" href="/assets/js/31.57338027.js"><link rel="prefetch" href="/assets/js/32.c6e6f766.js"><link rel="prefetch" href="/assets/js/33.ee83017b.js"><link rel="prefetch" href="/assets/js/34.9adc375a.js"><link rel="prefetch" href="/assets/js/35.5a5f7bb7.js"><link rel="prefetch" href="/assets/js/36.e2545582.js"><link rel="prefetch" href="/assets/js/37.0eb8cc70.js"><link rel="prefetch" href="/assets/js/38.84124562.js"><link rel="prefetch" href="/assets/js/39.bf4aa161.js"><link rel="prefetch" href="/assets/js/4.6ba5942f.js"><link rel="prefetch" href="/assets/js/40.11b0e7ee.js"><link rel="prefetch" href="/assets/js/41.e727669e.js"><link rel="prefetch" href="/assets/js/43.6a147059.js"><link rel="prefetch" href="/assets/js/44.a2bf17a5.js"><link rel="prefetch" href="/assets/js/45.3ff1d0d1.js"><link rel="prefetch" href="/assets/js/46.c84ab2db.js"><link rel="prefetch" href="/assets/js/47.b5fc1bda.js"><link rel="prefetch" href="/assets/js/48.87932f25.js"><link rel="prefetch" href="/assets/js/49.1b5e3ca0.js"><link rel="prefetch" href="/assets/js/5.0c02ed2b.js"><link rel="prefetch" href="/assets/js/50.0c49f3da.js"><link rel="prefetch" href="/assets/js/51.05425652.js"><link rel="prefetch" href="/assets/js/52.51995a7a.js"><link rel="prefetch" href="/assets/js/53.cd441341.js"><link rel="prefetch" href="/assets/js/54.69d5ba43.js"><link rel="prefetch" href="/assets/js/55.496f36cc.js"><link rel="prefetch" href="/assets/js/56.f98a821f.js"><link rel="prefetch" href="/assets/js/57.bf2fdef7.js"><link rel="prefetch" href="/assets/js/58.f208592f.js"><link rel="prefetch" href="/assets/js/59.a1cf2460.js"><link rel="prefetch" href="/assets/js/6.75834963.js"><link rel="prefetch" href="/assets/js/60.59aefd15.js"><link rel="prefetch" href="/assets/js/7.0929d87c.js"><link rel="prefetch" href="/assets/js/8.66ffbfac.js"><link rel="prefetch" href="/assets/js/9.5e86fdd3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b4782a24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Vocdoni</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/architecture/general.html" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://blog.vocdoni.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/about-us/vision.html" class="nav-link">
  About us
</a></div><div class="nav-item"><a href="https://discord.gg/sQCxgYs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/architecture/general.html" class="nav-link">
  Architecture
</a></div><div class="nav-item"><a href="https://blog.vocdoni.io/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/about-us/vision.html" class="nav-link">
  About us
</a></div><div class="nav-item"><a href="https://discord.gg/sQCxgYs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/architecture/general" class="sidebar-heading clickable"><span>Architecture</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/architecture/general.html" class="sidebar-link">Global Architecture</a></li><li><a href="/architecture/process-overview.html" class="sidebar-link">Process Overview</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/architecture/census/census-overview" class="sidebar-heading clickable"><span>The Census</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/architecture/components.html" class="sidebar-link">Component Overview</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/architecture/smart-contracts/entity-resolver" class="sidebar-heading clickable"><span>Smart Contracts</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/architecture/services/gateway" class="sidebar-heading clickable"><span>Services</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/architecture/data-schemes/entity-metadata" class="sidebar-heading clickable"><span>Data Schemes</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/architecture/protocol/json-api" class="sidebar-heading clickable"><span>Protocol</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/architecture/component-interaction.html" class="sidebar-link">Component Interaction</a></li><li><a href="/architecture/libraries-tooling.html" class="sidebar-link">Libraries and Tooling</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/integration/overview" class="sidebar-heading clickable"><span>Integration</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/integration/overview.html" class="sidebar-link">Overview</a></li><li><a href="/integration/getting-started-local-vochain.html" class="sidebar-link">Getting started with a local instance</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/integration/vaas-api" class="sidebar-heading clickable"><span>Voting as a Service</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/integration/manual-integration.html" class="sidebar-link">Manual Integration</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/integration/census/general" class="sidebar-heading clickable"><span>Census</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/deployment/gateway" class="sidebar-heading clickable open"><span>Deployment</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/deployment/gateway.html" class="sidebar-link">Gateway Deployment (stage)</a></li><li><a href="/deployment/miner.html" class="sidebar-link">Miner Deployment</a></li><li><a href="/deployment/oracle.html" class="sidebar-link">Oracle Deployment (stage)</a></li><li><a href="/deployment/custom-vochain.html" aria-current="page" class="active sidebar-link">Custom Vochain Deployment</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/about-us/vision" class="sidebar-heading clickable"><span>About</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/about-us/vision.html" class="sidebar-link">Vision</a></li><li><a href="/about-us/how-we-work.html" class="sidebar-link">How We Work</a></li><li><section class="sidebar-group is-sub-group depth-1"><a href="/about-us/development-guidelines" class="sidebar-heading clickable"><span>Development Guidelines</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/about-us/development-guidelines.html" class="sidebar-link">Development guidelines</a></li><li><a href="/about-us/repository-branching.html" class="sidebar-link">Repository and branching guidelines</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="custom-vochain-deployment"><a href="#custom-vochain-deployment" class="header-anchor">#</a> Custom Vochain Deployment</h1> <p>In this document we will guide through the steps of deploying a full Vochain (Vocdoni's blockchain) stack using a custom architecture. It is meant to give the reader a general idea on how Vocdoni components work, and it is not meant to be production ready chain.</p> <p>The Vocdoni's mainnet chain genesis is 'hardcoded' into the project's code itself, but it is also possible to generate any other tendermint based chain at will for testing, forking or any other purposes.</p> <p>For this example, we are going to show a simple environment consisting of 3 miners, two gateways and one oracle.</p> <p>Please refer to the <a href="https://docs.vocdoni.io/#/architecture/general" target="_blank" rel="noopener noreferrer">documentation<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to learn more about each type of node role.</p> <h3 id="requirements"><a href="#requirements" class="header-anchor">#</a> Requirements</h3> <h3 id="genesis-and-keys-generation"><a href="#genesis-and-keys-generation" class="header-anchor">#</a> Genesis and keys generation</h3> <p>First, we are going to generate all the cryptographic keys that our nodes will use to identify themselves, sign transactions, etc. The project <code>go-dvote</code> includes a command line tool to help us with that, so we can do it in only one command.</p> <p>Let's build <code>dvotecli</code> tool. Clone the project:</p> <div class="language- extra-class"><pre class="language-text"><code>git clone https://github.com/vocdoni/go-dvote
cd go-dvote
</code></pre></div><p>Then, build the command line tool:</p> <div class="language- extra-class"><pre class="language-text"><code>go build ./cmd/dvotecli
</code></pre></div><p>Now we are ready to generate the keys and the genesis.
This tool will provide us keys for miners and oracles, the gateways will follow later on.</p> <p>We need to choose a chain identification name for it, we will call it <code>examplechain</code></p> <p>We are going to deploy 3 miners and one oracle only, so the command will be:</p> <div class="language- extra-class"><pre class="language-text"><code>./dvotecli generate --chainId examplechain --miners 3 --oracles 1
</code></pre></div><p>The (long) output will be similar to:</p> <div class="language- extra-class"><pre class="language-text"><code>&gt;&gt;&gt; Miner #1
Address: DF071D6D2543569845AE7597E36423E748A372CA
Private Key: 763db55b88a010e3add4d801320107d58909efdcb82e1ca4edb02b7535d7a3d5345c5cd42b0b37ac3ad91a98e259a18c1423921545f029f534baac9312ec16ae
&gt;&gt;&gt; Miner #2
Address: 1C8F495E296C38274F71B3BD4D2A40503276BF96
Private Key: 51c7662540ca01338fefa5c8caf6a26020bbaa2a437203d0d12717228eb6632d189d60ff7c66c29dd41d7a141b5b21e841cb8cb9d8d6537b1fe9f6ca6a20b67d
&gt;&gt;&gt; Miner #3
Address: E1467FE6E32824854837A7DB68D6B27D3080034E
Private Key: d5a8d1d975370d83763c4623ffaf0f421ace76225b8ef53406486d945ec64339985080fc53ef5f36cfd882feec67d067f694d658d4683786112f8576a1fb4b18

&gt;&gt;&gt; Oracle #1
Address: 0xdb016B645f49b70B881E118da91d502e88b3888A
Private Key: 35326662373437353637633539393332653336356136393935643662626136616530623836353435356162356532343461366466666261613066343437333464

&gt;&gt;&gt; Genesis JSON
{
  &quot;genesis_time&quot;: &quot;2020-11-03T10:05:40.580623347Z&quot;,
  &quot;chain_id&quot;: &quot;examplechain&quot;,
  &quot;consensus_params&quot;: {
    &quot;block&quot;: {
      &quot;max_bytes&quot;: &quot;22020096&quot;,
      &quot;max_gas&quot;: &quot;-1&quot;,
      &quot;time_iota_ms&quot;: &quot;1000&quot;
    },
    &quot;evidence&quot;: {
      &quot;max_age_num_blocks&quot;: &quot;100000&quot;,
      &quot;max_age_duration&quot;: &quot;172800000000000&quot;
    },
    &quot;validator&quot;: {
      &quot;pub_key_types&quot;: [
        &quot;ed25519&quot;
      ]
    }
  },
  &quot;validators&quot;: [
    {
      &quot;address&quot;: &quot;DF071D6D2543569845AE7597E36423E748A372CA&quot;,
      &quot;pub_key&quot;: {
        &quot;type&quot;: &quot;tendermint/PubKeyEd25519&quot;,
        &quot;value&quot;: &quot;NFxc1CsLN6w62RqY4lmhjBQjkhVF8Cn1NLqskxLsFq4=&quot;
      },
      &quot;power&quot;: &quot;10&quot;,
      &quot;name&quot;: &quot;miner-1&quot;
    },
    {
      &quot;address&quot;: &quot;1C8F495E296C38274F71B3BD4D2A40503276BF96&quot;,
      &quot;pub_key&quot;: {
        &quot;type&quot;: &quot;tendermint/PubKeyEd25519&quot;,
        &quot;value&quot;: &quot;GJ1g/3xmwp3UHXoUG1sh6EHLjLnY1lN7H+n2ymogtn0=&quot;
      },
      &quot;power&quot;: &quot;10&quot;,
      &quot;name&quot;: &quot;miner-2&quot;
    },
    {
      &quot;address&quot;: &quot;E1467FE6E32824854837A7DB68D6B27D3080034E&quot;,
      &quot;pub_key&quot;: {
        &quot;type&quot;: &quot;tendermint/PubKeyEd25519&quot;,
        &quot;value&quot;: &quot;mFCA/FPvXzbP2IL+7GfQZ/aU1ljUaDeGES+FdqH7Sxg=&quot;
      },
      &quot;power&quot;: &quot;10&quot;,
      &quot;name&quot;: &quot;miner-3&quot;
    }
  ],
  &quot;app_hash&quot;: &quot;&quot;,https://docs.vocdoni.io/#/architecture/general
  &quot;app_state&quot;: {
    &quot;validators&quot;: [
      {
        &quot;address&quot;: &quot;DF071D6D2543569845AE7597E36423E748A372CA&quot;,
        &quot;pub_key&quot;: {
          &quot;type&quot;: &quot;tendermint/PubKeyEd25519&quot;,
          &quot;value&quot;: &quot;NFxc1CsLN6w62RqY4lmhjBQjkhVF8Cn1NLqskxLsFq4=&quot;
        },
        &quot;power&quot;: &quot;10&quot;,
        &quot;name&quot;: &quot;miner-1&quot;
      },
      {
        &quot;address&quot;: &quot;1C8F495E296C38274F71B3BD4D2A40503276BF96&quot;,
        &quot;pub_key&quot;: {
          &quot;type&quot;: &quot;tendermint/PubKeyEd25519&quot;,
          &quot;value&quot;: &quot;GJ1g/3xmwp3UHXoUG1sh6EHLjLnY1lN7H+n2ymogtn0=&quot;
        },
        &quot;power&quot;: &quot;10&quot;,
        &quot;name&quot;: &quot;miner-2&quot;
      },
      {
        &quot;address&quot;: &quot;E1467FE6E32824854837A7DB68D6B27D3080034E&quot;,
        &quot;pub_key&quot;: {
          &quot;type&quot;: &quot;tendermint/PubKeyEd25519&quot;,
          &quot;value&quot;: &quot;mFCA/FPvXzbP2IL+7GfQZ/aU1ljUaDeGES+FdqH7Sxg=&quot;
        },
        &quot;power&quot;: &quot;10&quot;,
        &quot;name&quot;: &quot;miner-3&quot;
      }
    ],
    &quot;oracles&quot;: [
      &quot;0xdb016B645f49b70B881E118da91d502e88b3888A&quot;
    ]
  }
}
</code></pre></div><p>As you can see, there's a first part with public / private keypairs for the miners and oracles, and a second part with JSON data, which defines the genesis file itself.</p> <p>Copy and paste all into a file. You can also redirect the output to a file, like this:</p> <div class="language- extra-class"><pre class="language-text"><code>./dvotecli --color=false  generate --chainId examplechain --miners 3 --oracles 1 &gt; example_chain.txt
</code></pre></div><h3 id="miners-deployment"><a href="#miners-deployment" class="header-anchor">#</a> Miners deployment</h3> <h3 id="oracle-deployment"><a href="#oracle-deployment" class="header-anchor">#</a> Oracle deployment</h3></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">6/18/2021, 4:35:20 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/deployment/oracle.html" class="prev">
        Oracle Deployment (stage)
      </a></span> <span class="next"><a href="/about-us/vision.html">
        Vision
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.003a3fab.js" defer></script><script src="/assets/js/2.d75a9e61.js" defer></script><script src="/assets/js/42.995b740c.js" defer></script>
  </body>
</html>
